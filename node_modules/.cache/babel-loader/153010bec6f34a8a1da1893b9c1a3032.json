{"ast":null,"code":"import _classCallCheck from \"/Users/taras/Desktop/react-foody/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/taras/Desktop/react-foody/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/taras/Desktop/react-foody/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/taras/Desktop/react-foody/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/taras/Desktop/react-foody/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/taras/Desktop/react-foody/src/modules/user/UserMenu/UserMenu.js\";\nimport React, { Component, createRef } from 'react';\nimport Dropdown from './Dropdown/Dropdown';\nimport Avatar from '../Avatar/Avatar';\nimport s from './UserMenu.module.css';\n\nvar UserMenu =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserMenu, _Component);\n\n  function UserMenu() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserMenu)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.containerRef = createRef();\n    _this.state = {\n      isDropdownOpen: false\n    };\n\n    _this.handleWindowClick = function (e) {\n      var isTargetInsideContainer = _this.containerRef.current.contains(e.target);\n\n      var isDropdownOpen = _this.state.isDropdownOpen;\n\n      if (isDropdownOpen && !isTargetInsideContainer) {\n        _this.closeDropdown();\n      }\n    };\n\n    _this.openDropdown = function () {\n      _this.setState({\n        isDropdownOpen: true\n      });\n    };\n\n    _this.closeDropdown = function () {\n      _this.setState({\n        isDropdownOpen: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UserMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('click', this.handleWindowClick);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var isDropdownOpen = this.state.isDropdownOpen;\n      return nextState.isDropdownOpen !== isDropdownOpen;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('click', this.handleWindowClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isDropdownOpen = this.state.isDropdownOpen;\n      var _this$props = this.props,\n          name = _this$props.name,\n          avatar = _this$props.avatar;\n      return React.createElement(\"div\", {\n        className: s.container,\n        onClick: this.openDropdown,\n        ref: this.containerRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        image: avatar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: s.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, name), isDropdownOpen && React.createElement(Dropdown, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UserMenu;\n}(Component);\n\nexport { UserMenu as default };","map":{"version":3,"sources":["/Users/taras/Desktop/react-foody/src/modules/user/UserMenu/UserMenu.js"],"names":["React","Component","createRef","Dropdown","Avatar","s","UserMenu","containerRef","state","isDropdownOpen","handleWindowClick","e","isTargetInsideContainer","current","contains","target","closeDropdown","openDropdown","setState","window","addEventListener","nextProps","nextState","removeEventListener","props","name","avatar","container"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,CAAP,MAAc,uBAAd;;IAEqBC,Q;;;;;;;;;;;;;;;;;UACnBC,Y,GAAeL,SAAS,E;UAExBM,K,GAAQ;AACNC,MAAAA,cAAc,EAAE;AADV,K;;UAkBRC,iB,GAAoB,UAAAC,CAAC,EAAI;AACvB,UAAMC,uBAAuB,GAAG,MAAKL,YAAL,CAAkBM,OAAlB,CAA0BC,QAA1B,CAC9BH,CAAC,CAACI,MAD4B,CAAhC;;AADuB,UAIfN,cAJe,GAII,MAAKD,KAJT,CAIfC,cAJe;;AAMvB,UAAIA,cAAc,IAAI,CAACG,uBAAvB,EAAgD;AAC9C,cAAKI,aAAL;AACD;AACF,K;;UAEDC,Y,GAAe,YAAM;AACnB,YAAKC,QAAL,CAAc;AAAET,QAAAA,cAAc,EAAE;AAAlB,OAAd;AACD,K;;UAEDO,a,GAAgB,YAAM;AACpB,YAAKE,QAAL,CAAc;AAAET,QAAAA,cAAc,EAAE;AAAlB,OAAd;AACD,K;;;;;;;wCA/BmB;AAClBU,MAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,KAAKV,iBAAtC;AACD;;;0CAEqBW,S,EAAWC,S,EAAW;AAAA,UAClCb,cADkC,GACf,KAAKD,KADU,CAClCC,cADkC;AAG1C,aAAOa,SAAS,CAACb,cAAV,KAA6BA,cAApC;AACD;;;2CAEsB;AACrBU,MAAAA,MAAM,CAACI,mBAAP,CAA2B,OAA3B,EAAoC,KAAKb,iBAAzC;AACD;;;6BAqBQ;AAAA,UACCD,cADD,GACoB,KAAKD,KADzB,CACCC,cADD;AAAA,wBAEkB,KAAKe,KAFvB;AAAA,UAECC,IAFD,eAECA,IAFD;AAAA,UAEOC,MAFP,eAEOA,MAFP;AAIP,aACE;AACE,QAAA,SAAS,EAAErB,CAAC,CAACsB,SADf;AAEE,QAAA,OAAO,EAAE,KAAKV,YAFhB;AAGE,QAAA,GAAG,EAAE,KAAKV,YAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAEmB,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,EAME;AAAM,QAAA,SAAS,EAAErB,CAAC,CAACoB,IAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0BA,IAA1B,CANF,EAOGhB,cAAc,IAAI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPrB,CADF;AAWD;;;;EAvDmCR,S;;SAAjBK,Q","sourcesContent":["import React, { Component, createRef } from 'react';\nimport Dropdown from './Dropdown/Dropdown';\nimport Avatar from '../Avatar/Avatar';\nimport s from './UserMenu.module.css';\n\nexport default class UserMenu extends Component {\n  containerRef = createRef();\n\n  state = {\n    isDropdownOpen: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener('click', this.handleWindowClick);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const { isDropdownOpen } = this.state;\n\n    return nextState.isDropdownOpen !== isDropdownOpen;\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.handleWindowClick);\n  }\n\n  handleWindowClick = e => {\n    const isTargetInsideContainer = this.containerRef.current.contains(\n      e.target,\n    );\n    const { isDropdownOpen } = this.state;\n\n    if (isDropdownOpen && !isTargetInsideContainer) {\n      this.closeDropdown();\n    }\n  };\n\n  openDropdown = () => {\n    this.setState({ isDropdownOpen: true });\n  };\n\n  closeDropdown = () => {\n    this.setState({ isDropdownOpen: false });\n  };\n\n  render() {\n    const { isDropdownOpen } = this.state;\n    const { name, avatar } = this.props;\n\n    return (\n      <div\n        className={s.container}\n        onClick={this.openDropdown}\n        ref={this.containerRef}\n      >\n        <Avatar image={avatar} />\n        <span className={s.name}>{name}</span>\n        {isDropdownOpen && <Dropdown />}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}